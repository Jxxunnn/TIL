# React

## React를 쓰는 이유

1. Single Page Application을 만들 떄 쓴다.
   JS로 하면 코드가 길고 복잡해집.
   리액트가 유저가 가장 많음.
   > Naver Vibe, Flipkart, Instagram 이런 웹사이트 들어가봅시다.들어가면 페이지 전환 같은게 새로고침 없이 부드럽게 동작합니다.이런 사이트들을 Single Page Application 이라고 하는데- html 파일을 1개만 쓰고- 다른 페이지를 보여주고 싶을 때 html 부분만 샥 갈아치워서 보여줍니다.그래서 부드럽게 동작합니다.쌩자바스크립트로도 만들 수는 있지만 코드가 너무 길어지는 관계로리액트라는 자바스크립트 라이브러리를 설치해서 사용하면 이걸 더 쉽게 만들 수 있습니다.그래서 리액트라는 라이브러리를 배우고 사용하는 것입니다.
2. React쓰면 html 재사용 편리

   > 리액트 쓰는 또 다른 이유들은 - html을 함수, array, object 이런 곳에 보관하고 재사용할 수 있어서큰 프로젝트일 수록 html 관리 편리해짐 - React Native를 쓰면 같은 리액트 문법으로 모바일 앱개발도 가능합니다.거기선 html css 문법만 약간 다릅니다

3. 같은 문법으로 앱개발 가능
   > 리액트 네이티브, html css 문법만 약간 다름.

## 리액트 설치와 개발환경 세팅

1. nodejs 검색해서 설치
2. vscode 에디터 검색해서 설치
3. 프로젝트 생성
   1. 터미널에 `npx create-react-app [프로젝트명]`
   2. `cd ./[프로젝트명]`
   3. `npm start`

### 프로젝트 파일들 설명

- node_modules 폴더: 라이브러리 코드 보관함
- public 폴더: static 파일 모아놓는 곳
- src: 코드짜는 곳
- package.json: 프로젝트 정보

## 리액트에서 레이아웃 만들 때 쓰는 JSX 문법 3개

1. class 넣을 땐 className
   > 잘보면 평소에 짜던 html/css와 다른 부분이 있습니다.스타일을 주기 위한 class명을 넣을 때 class=" " 가 아니라 className=" " 이렇게 쓰는 부분이 좀 다른데 왜냐면 실은 App.js에 짜고 있는건 html이 아니라 JSX라고 부르는 이상한 언어라서 그렇습니다. 원래 리액트환경에서 <div>하나 만들고 싶으면 자바스크립트로React.createElement('div', null)이딴 식으로 어렵게 코드짜야합니다.근데 그러면 유저들 다 도망가기 때문에 JSX라는 언어를 대신 사용합니다.JSX는 html과 사용방식은 비슷합니다.근데 JSX는 일종의 자바스크립트라서자바스크립트에서 사용하는 예약어인 class라는 키워드를 막 사용하시면 안됩니다.그래서 class=" " 넣고 싶으면 className이라고 써야합니다.이것이 JSX 다루는 첫째 문법이고 외우고 지나가도록 합시다.
2. 데이터 바인딩은 {중괄호} 3. style넣을 땐 style={{스타일 명: "값"}}

   > 아무튼 저 let post 안에 있던 자료를 <div>안에 꽂아넣고 싶으면 어떻게하죠? 옛날 자바스크립트 문법을 쓴다면 document.getElementById().innerHTML = ?? 이런 식이었겠지만리액트에서는 더 쉽게 데이터를 꽂아넣을 수 있습니다.
   > 온갖 곳에 {} 중괄호를 열어서 변수들을 집어넣을 수 있습니다. href, id, className, src 등 여러가지 html 속성들에도 가능합니다. 위처럼 쓰면 <div className="red"> 이렇게 되겠군요.

3. html에 style 속성을 넣고 싶으면 <div style={ {color : 'blue', fontSize : '30px'} }> 글씨 </div>
   > <div style="color : blue"> 이런걸 넣고 싶으면 JSX 상에서는 style={ } 안에 { } 자료형으로 집어넣어야합니다. 이렇게 넣어야합니다. { 속성명 : '속성값' } 이렇게 넣으면 됩니다. 근데 font-size 처럼 속성명에 대쉬기호를 쓸 수 없습니다. 대쉬기호 대신 모든 단어를 붙여써야합니다. 붙여쓸 땐 앞글자를 대문자로 치환해야합니다. css 파일 열기 귀찮을 때 쓰면 됩니다. 참고로 변수에 있던걸 html에 꽂아넣는 작업을 있어보이는 말로 데이터바인딩이라고 합니다.

> (참고)css파일 쓰려면 상단에서 import 'css파일 경로`
> (참고)에러메세지는 터미널/브라우저에서 확인 또는 개발자도구

## 중요한 데이터는 변수말고 state에 담습니다.

- return() 안에는 병렬로 태그 2개 이상 기입금지
- 자료 잠깐 저장할 땐 변수, state써도 된다

### state 사용법

1. import {useState}
2. useState(보관할 자료)
3. let [작명, 작명]

**_Q. 왜 state 써야함?_**
변수와 state는 차이점이 있는데 일반 변수는 갑자기 변경되면 html에 자동으로 반영이 안됨. 하지만 state는 갑자기 변경되면 state쓰던 html은 자동으로 재렌더링 됨.
-> 변경시 자동으로 html에 반영되게 만들고 싶으면 state쓰셈.
-> 자주 변경될 거 같은 html부분은 state로 만들어 놓기.
-> UI 기능 개발도 매우 편리해지고 스무스하게 동작 함.
-> 바뀌지 않는 데이터들 혹은 굳이 html에 표기가 필요없는 데이터들은 그냥 변수에 저장해도 됨.

## 버튼에 기능개발을 해보자 & 리액트 state 변경하는 법

> (참고)ERROR는 에러라 중요, WARNING은 무시가능 /_ eslint-disable _/를 상단에 기입해줘서 Lint 끌 수 있음. 원인같은 것을 출력해주는 기능이 Lint인데 고마운 기능이지만 초보 때는 걍 꺼도 됨.

- onClick={} 안에는 함수 이름을 넣어야 함, 함수 만드는 문법을 바로 넣어도 상관 없음.

```js
일반 html파일에서는
<div onclick="실행할 자바스크립트~~">

JSX에서는
<div onClick={실행할함수}>

1. Click이 대문자인 거
2. {}중괄호 사용하는 거
3. 그냥 코드가 아니라 함수를 넣어야 잘 작동한다는 거를 기억해라.
```

- state변경하는 법(등호로 변경 금지. 등호로 바꾸면 html 재렌더링 안 됨. setState변경함수를 써서 state 바꿔야 함)
  `setLikes(새로운state)` 이렇게 쓰면 된다. 왜냐면 state 변경함수는 ()안에 넣은 걸로 state를 갈아치워주는 함수이기 때문이다. 깔끔하게 새로운 state만 집어넣으면 된다.

### 요약

1. 클릭시 뭔가 실행하고 싶으면 onClick={함수} 이렇게 이벤트 핸들러를 달아서 사용합니다.
2. state를 변경하시려면 state 변경함수를 꼭 이용하십시오. state변경함수는 ( ) 안에 입력한걸로 기존 state를 갈아치워줍니다. 중요하니 외워둬야합니다.

## array, object state 변경하는 법

> (참고)array, object 다룰 때 원본은 보존하는 게 좋음

```js
<button
  type="button"
  onClick={() => {
    let copy = [...글제목];
    copy[0] = "노자 코트 추천";
    setTitle(copy);
  }}
>
  바꿔
</button>
```

**_state 변경함수 특징_**
기존 state == 신규 state인 경우 변경을 안해준다.
state가 array/object이면 독립적 카피본을 만들어서 수정해야 한다.

## Component: 많은 div들을 한 단어로 줄이고 싶으면

리액트는 긴 HTML을 한 단어로 깔끔하게 치환해서 넣을 수 있는 문법을 제공합니다. Component라고 합니다. 이걸 이용하면 함수 만들듯, 변수 만들듯 HTML을 깔끔하게 한 단어로 치환해서 원하는 곳에 꽂아넣을 수 있습니다. 우리 방금 만든 모달창도 깔끔하게 한 단어로 치환해봅시다.

### 컴포넌트 만드는 법

1. function 만들고
2. return()안에 html 담기
3. <함수명></함수명> 쓰기
   > 컴포넌트 안에 컴포넌트를 만들지는 않는다!!

> (참고1)return() 안에 html 병렬기입하려면 fragment 문법 써보자 <>

### 컴포넌트 언제 쓰면 좋을까?

1. 반복적인 html 축약할 때
2. 큰 페이지들
3. 자주 변경되는 UI들

### 컴포넌트의 단점

state 가져다 쓸 때 문제 생김

## 리액트 환경에서 동적인 UI 만드는 법(모달창 만들기)

1. html css로 미리 디자인 완성
2. UI의 현재 상태를 state로 저장 (형식은 자유, 모달창 상태 표현만 가능하면 됨)
3. state에 따라 UI가 어떻게 보일지 작성

그래서 리액트에서 UI만드는 과정을 비유하면 스위치와 전등만드는거랑 비슷하다고 보면 됩니다.

1. 일단 전등이쁘게 달아놓고
2. 스위치랑 연결하고
3. 스위치를 on으로 놓으면 불이 켜지고 off로 놓으면 불이 꺼지도록

만들어놓는 겁니다. 그리고 나중에 필요하면 스위치 조작만 하면 되는 것임 스위치는 state, 전등은 <Modal>입니다.

그래서 예전 쌩자바스크립트로 UI 만드는 것과는 약간 방식이 다릅니다. 쌩자바스크립트는 귀찮게 html을 조작해야했는데 리액트환경에선 html을 직접 조작하지 않습니다. 그래서 예전 방식에 익숙한 사람이라면 정신개조를 좀 해야함

## map: 많은 dive들을 반복문으로 줄이고 싶은 충동이 들 때

**_반복문으로 같은 html 반복생성하는 법_**
똑같은 html이 반복적으로 출현하면 반복문을 이용해서 쉽게 똑같은 html을 생성할 수도 있습니다 안타깝게도 for 반복문은 JSX 중괄호 안에서 사용할 수 없어서 map() 을 대신 사용합니다.

### JSX안에서 HTML을 반복생성하고 싶으면

리액트 중괄호안에서 html을 반복생성하고 싶으면 아까 배운 map을 이용해도 됩니다.
우선 [1, 2, 3] 에다가 map을 붙였으니 그 안의 자료 갯수만큼 map 내부 코드를 실행해줍니다.
근데 안에 return <div>안녕</div> 이게 있군요
그럼 <div>안녕</div> 이걸 array에 담아줍니다. 3번이나요

```
[ <div>안녕</div>, <div>안녕</div>, <div>안녕</div> ]
```

▲ 그럼 이게 남습니다.
근데 이걸 html로 미리보기 띄워볼 땐

```
<div>안녕</div>
<div>안녕</div>
<div>안녕</div>
```

이렇게 보입니다. 그래서 map을 써도 html 반복생성이 가능한 것임

**_(참고) 일반 for 반복문을 쓰고싶다면_**

1. html들을 담아둘 array 자료를 하나 만들어줍니다.

2. 일반 for 반복문을 이용해서 반복문을 돌림

3. 반복될 때 마다 array자료에 <div> 하나씩 추가해줍니다.

4. 원하는 곳에서 {array자료} 사용하면 됩니다.

-> for 문법은 JSX 안에서 사용할 수 없어서 저렇게 바깥에서 쓰면 됩니다. 귀찮으면 map을 씁시다.

## 자식이 부모의 state를 가져다쓰고 싶을 때는 props

자식 컴포넌트가 부모 컴포넌트에 있던 state를 쓰고 싶으면 그냥 쓰면 안되고 props로 전송해서 써야합니다.

**_부모 -> 자식 state 전송하는 법_**
props 문법을 쓰면 된다. (실은 props도 파라미터 문법일 뿐임)
props 전송은 부모 -> 자식만 가능하다.
컴포넌트 많아지면 props 쓰는 게 귀찮아짐.

1. <자식컴포넌트 작명={state이름}>
2. props 파라미터 등록 후 props.작명 사용

## props를 응용한 상세페이지 만들기

모달창안의 제목도 일종의 동적인 UI입니다. 동적인 UI 어떻게 만들라고 했습니까

1. html css로 미리 디자인해놓고
2. 현재 UI의 상태를 state로 만들어두고
3. state 종류에 따라서 UI가 어떻게 보일지 작성하랬습니다. 그러면 끝임

이제 나중에 필요할 때 스위치 (state) 조작만 하면 됩니다.

### Q. state를 자식컴포넌트에 만들어버리면 props 전송안해도 되지않나요?

A. 맞습니다. title같은 state도 자식컴포넌트 안에 만들어보면 편할듯요? 하지만 지금 title이라는 state는 App도 쓰고 Modal도 쓰고 있습니다. 그렇게 다양한 컴포넌트에서 쓰이는 state는 컴포넌트들 중 최고로 높은 부모에게 만들어놔야합니다. 왜냐면 state는 부모 → 자식 전송만 가능하니까 그렇습니다. state를 자식에 만들어놨는데 갑자기 부모가 그게 필요해지면 어떻게 할 방법이 없으니까요. 생각하기 귀찮으면 그냥 대부분 App 컴포넌트안에 만들면 됩니다.

### 오늘 요약 :

1. 그래서 UI만드는 3-step 외워주면 알아서 뭐든 만들 수 있습니다. 이제 저에게 그만 물어보고 알아서 만들도록 합시다.
2. state는 state를 사용하는 컴포넌트 중 최고 부모에 만들어놓아야합니다.

## input 1: 사용자가 입력한 글 다루기

유저가 <input>에 뭔가 입력시 코드를 실행해주고 싶을 때가 많습니다.
그러고 싶으면 onChange 아니면 onInput 이벤트핸들러를 부착하면 됩니다.

```js
<input
  onChange={() => {
    실행할코드;
  }}
/>
```

**_(참고)_**
이벤트 핸들러들은 매우 많습니다.
onMouseOver={ } 이건 이 요소에 마우스를 댔을 때 안의 코드를 실행해줍니다.
onScroll={ } 이건 이 요소를 스크롤했을 때 안의 코드를 실행해줍니다.
몇십개 있는데 원하는 이벤트가 있으면 찾아서 사용해봅시다.

### 사용자가 input에 입력한 데이터 저장하기

사용자가 input에 입력한 데이터는 state 아니면 변수에 저장해서 쓰는게 일반적입니다. 그래야 편리하기 때문에 일단 저장부터 해봅시다. state 배운 기념으로 state를 사용합시다.

```js
function App() {
  let [입력값, 입력값변경] = useState("");
  return (
    <input
      onChange={(e) => {
        입력값변경(e.target.value);
        console.log(입력값);
      }}
    />
  );
}
```

state를 하나 만들어주고 onChange될 때 마다 state에 e.target.value 넣으라고 코드를 짰습니다.
state에 문자를 저장하고 싶은데 일단 기본값을 뭘 넣을지 모르겠으면 따옴표 2개만 치면 됩니다. 따옴표 2개는 빈문자를 뜻합니다. 이제 입력값이라는 state를 필요한 곳에서 마음대로 사용하면 되겠습니다.

**_(참고)_**
근데 위 코드 실행해보면 a를 입력하면 콘솔창에 아무것도 안뜨지 않습니까
aa를 입력하면 a만 콘솔창에 뜨고요. 왜냐면 `state 변경함수 특징` 때문인데 state 변경함수는 약간 늦게 처리됩니다. 전문용어로 `async하게 (비동기적으로) 처리`된다고 합니다. 그리고 자바스크립트에선 늦게 처리되는 코드들은 잠깐 제쳐두고 바로 다음줄을 실행해줍니다. 그래서 console.log(입력값) 이게 먼저 실행되어서 저렇게 나오는 것일 뿐입니다. 그냥 실행 순서만 좀 다를 뿐 state변경은 어쨌든 잘 됩니다.

## 블로그 글발행 기능 만들기

**_Q.왜 새로고침하면 없어짐?_** -새로고침시 HTML, JS파일 다시 읽어서 그럼. 다시 읽으면 state나 변수같은 것들도 초기값으로 변경됩니다. 원래그럼 그래서 실제 서비스였으면 우선 서버로 보내서 DB에 영구저장을 하거나 그랬겠지만 갑자기 서버와 DB 가르치려면 20강 추가해야하니까 프론트엔드에서만 잘 구현해보면 됩니다.

## class를 이용한 옛날 React 문법
